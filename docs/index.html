<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Gabriel Godefroy" />
  <title>A gallery C++ of cache effects</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">A gallery C++ of cache effects</h1>
<p class="author">Gabriel Godefroy</p>
</header>
<p>Hardware effects impact performances. This repository contains C++ codes illustrating some of these effects, as well as Python code to plot the results. You can fork this repository and try to reproduce the results, as these performance tests are hardware dependent.</p>
<p>This repository, and all the contained examples, are strongly inspired by:</p>
<ul>
<li><a href="http://igoro.com/archive/gallery-of-processor-cache-effects/">“Gallery of Processor Cache Effects“, by Igor Ostrovsky</a></li>
<li><a href="https://www.youtube.com/watch?v=BP6NxVxDQIs">“Want fast C++? Know your hardware!“, by Timur Doumler</a></li>
</ul>
<p>Remember, <em>Premature optimization is the root of all evil</em> (D.E. Knuth), so don’t spend time trying to apply these tricks to your codebase without measurement. However, I find it interesting to <em>see</em> how hardward architecture can impact performance.</p>
<p>You can clone this repository and regenerate these experiments (and the web page) with your local machine. Feel free to provide correction, precision, and to contribute with new examples.</p>
<h3 id="results">Results:</h3>
<p>For each effect, the codes and results are presented in the following pages:</p>
<ul>
<li><p><a href="alignement.html"><strong>Memory alignement and padding</strong></a>: For a CPU to work efficiently, there are restrictions on the addresses where objects of types are located in memory (<em>alignment</em>). In order to respect these alignements, the compiler sometimes needs to insterts extra bytes (<em>padding</em>) between the the members of user_defined types. This impact memory consumption…</p></li>
<li><p><a href="cache_lines.html"><strong>Impact of cache lines</strong></a>: A cache is a smaller, faster memory, located closer to a processor core, which stores copies of the data from frequently used main memory locations. When loading data, the processor loads a whole cache line (<em>spatial locality</em>), and the data tends to remain in the cache for a few time (<em>temporal locality</em>). Accessing data that are already in a cache makes computations faster than reloading the data from the main memory.</p></li>
<li><p><a href="l1_l2.html"><strong>L1, L2 and L3 caches</strong></a> TODO</p></li>
<li><p><a href="cache_associativity.html"><strong>Cache associativity</strong></a> TODO</p></li>
</ul>
<h2 id="cache-associativity">Cache associativity</h2>
<p><img src="m_cache_associativity.png" alt="The impact of cache lines on cache associativity" /> <img src="m_cache_associativity_zoom.png" alt="The impact of cache lines on cache associativity" /></p>
</body>
</html>
